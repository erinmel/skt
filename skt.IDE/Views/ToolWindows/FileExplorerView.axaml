<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:skt.IDE.ViewModels.ToolWindows"
             xmlns:models="using:skt.IDE.Models"
             xmlns:svg="clr-namespace:Avalonia.Svg.Skia;assembly=Avalonia.Svg.Skia"
             x:Class="skt.IDE.Views.ToolWindows.FileExplorerView"
             x:DataType="vm:FileExplorerViewModel">

  <Design.DataContext>
    <vm:FileExplorerViewModel/>
  </Design.DataContext>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Project Header -->
    <Border Grid.Row="0" Padding="8,4" Margin="2">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding ProjectName}" FontWeight="Bold"/>
      </StackPanel>
    </Border>

    <!-- File Tree -->
    <TreeView Grid.Row="1"
              Name="FileTreeView"
              ItemsSource="{Binding RootNodes}"
              Margin="2">
      <TreeView.ItemTemplate>
        <TreeDataTemplate ItemsSource="{Binding Children}" x:DataType="models:FileNode">
          <StackPanel Orientation="Horizontal" Spacing="6">
            <svg:Svg Path="{Binding IconPath}" Width="16" Height="16" Stretch="Uniform"/>
            <TextBlock Text="{Binding DisplayName}"/>
          </StackPanel>
        </TreeDataTemplate>
      </TreeView.ItemTemplate>
      <TreeView.Styles>
        <Style Selector="TreeViewItem" x:DataType="models:FileNode">
          <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
        </Style>
      </TreeView.Styles>
    </TreeView>
  </Grid>
</UserControl>
