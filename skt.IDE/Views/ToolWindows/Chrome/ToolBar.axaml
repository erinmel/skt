<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:skt.IDE.ViewModels"
             xmlns:shell="using:skt.IDE.Views.Shell"
             xmlns:chrome="using:skt.IDE.Views.ToolWindows.Chrome"
             x:Class="skt.IDE.Views.ToolWindows.Chrome.Toolbar"
             x:DataType="vm:MainWindowViewModel"
             Margin="0"
             Padding="0">

    <Border Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
            x:Name="TitleBar"
            VerticalAlignment="Stretch"
            HorizontalAlignment="Stretch"
            Margin="0"
            Padding="0"
            BorderThickness="0">
        <Grid VerticalAlignment="Stretch" Margin="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Logo and File Operations -->
            <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="8,0,0,0" VerticalAlignment="Center" Name="LogoPanel">
                <shell:SktIcon IconKey="Icon.SktFile" IconSize="{DynamicResource IconSizeLogo}" VerticalAlignment="Center"/>

                <!-- File Menu Dropdown -->
                <DropDownButton Name="FileMenuDropDown"
                                Tag="ToolIcon"
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="{DynamicResource ButtonPadding}">
                    <DropDownButton.Content>
                        <shell:SktIcon IconKey="Icon.ToolbarMenu" IconSize="{DynamicResource IconSizeToolbar}"/>
                    </DropDownButton.Content>
                    <DropDownButton.Flyout>
                        <MenuFlyout>
                            <MenuItem Header="New Project" Click="NewProjectButton_Click">
                                <MenuItem.Icon>
                                    <shell:SktIcon IconKey="Icon.ToolbarProjectNew" IconSize="{DynamicResource IconSizeMenu}"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Open Project" Click="OpenProjectButton_Click">
                                <MenuItem.Icon>
                                    <shell:SktIcon IconKey="Icon.ToolbarProjectOpen" IconSize="{DynamicResource IconSizeMenu}"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <Separator/>
                            <MenuItem Header="New File" Click="NewFileButton_Click">
                                <MenuItem.Icon>
                                    <shell:SktIcon IconKey="Icon.ToolbarFileNew" IconSize="{DynamicResource IconSizeMenu}"/>
                                </MenuItem.Icon>
                            </MenuItem>
                            <Separator/>
                            <MenuItem Header="Settings" Click="SettingsButton_Click">
                                <MenuItem.Icon>
                                    <shell:SktIcon IconKey="Icon.ToolbarSettings" IconSize="{DynamicResource IconSizeMenu}"/>
                                </MenuItem.Icon>
                            </MenuItem>
                        </MenuFlyout>
                    </DropDownButton.Flyout>
                </DropDownButton>

                <!-- Compiler Menu Dropdown -->
                <DropDownButton Name="CompilerMenuDropDown"
                                Background="Transparent"
                                BorderThickness="0"
                                Padding="{DynamicResource ButtonPadding}">
                    <DropDownButton.Content>
                        <TextBlock Text="Compiler"/>
                    </DropDownButton.Content>
                    <DropDownButton.Flyout>
                        <MenuFlyout>
                            <MenuItem Header="Lexical" Name="LexicalAnalysisMenuItem" Click="LexicalAnalysisMenuItem_Click"/>
                            <MenuItem Header="Syntactic" Name="SyntacticAnalysisMenuItem" Click="SyntacticAnalysisMenuItem_Click" IsEnabled="False"/>
                            <MenuItem Header="Semantic" Name="SemanticAnalysisMenuItem" Click="SemanticAnalysisMenuItem_Click" IsEnabled="False"/>
                            <MenuItem Header="P-Code" Name="GeneratePCodeMenuItem" Click="GeneratePCodeMenuItem_Click" IsEnabled="False"/>
                        </MenuFlyout>
                    </DropDownButton.Flyout>
                </DropDownButton>

                <!-- Open Project Button -->
                <Button Name="OpenProjectButton"
                        Tag="ToolIcon"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="{DynamicResource ButtonPadding}"
                        ToolTip.Tip="Open Project"
                        Click="OpenProjectButton_Click">
                    <shell:SktIcon IconKey="Icon.ToolbarProjectOpen" IconSize="{DynamicResource IconSizeToolbar}"/>
                </Button>

                <!-- New Project Button -->
                <Button Name="NewProjectButton"
                        Tag="ToolIcon"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="{DynamicResource ButtonPadding}"
                        ToolTip.Tip="New Project"
                        Click="NewProjectButton_Click">
                    <shell:SktIcon IconKey="Icon.ToolbarProjectNew" IconSize="{DynamicResource IconSizeToolbar}"/>
                </Button>

                <!-- New File Button -->
                <Button Name="NewFileButton"
                        Tag="ToolIcon"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="{DynamicResource ButtonPadding}"
                        ToolTip.Tip="New File"
                        Click="NewFileButton_Click">
                    <shell:SktIcon IconKey="Icon.ToolbarFileNew" IconSize="{DynamicResource IconSizeToolbar}"/>
                </Button>


                <!-- Save Button -->
                <Button Name="SaveButton"
                        Tag="ToolIcon"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="{DynamicResource ButtonPadding}"
                        ToolTip.Tip="Save"
                        Click="SaveButton_Click">
                    <shell:SktIcon IconKey="Icon.ToolbarSave" IconSize="{DynamicResource IconSizeToolbar}"/>
                </Button>

                <!-- Save As Button -->
                <Button Name="SaveAsButton"
                        Tag="ToolIcon"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="{DynamicResource ButtonPadding}"
                        ToolTip.Tip="Save As"
                        Click="SaveAsButton_Click">
                    <shell:SktIcon IconKey="Icon.ToolbarSaveAs" IconSize="{DynamicResource IconSizeToolbar}"/>
                </Button>

                <!-- Execute P-Code Button -->
                <Button Name="ExecutePCodeButton"
                        Tag="ToolIcon"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="{DynamicResource ButtonPadding}"
                        ToolTip.Tip="Execute P-Code"
                        Click="ExecutePCodeButton_Click"
                        IsEnabled="False">
                    <shell:SktIcon IconKey="Icon.ToolbarExecute" IconSize="{DynamicResource IconSizeToolbar}"/>
                </Button>
            </StackPanel>

            <!-- Draggable Area -->
            <Border Grid.Column="1" Background="Transparent" x:Name="DragArea"/>

            <!-- Your Custom Window Controls -->
            <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="0" VerticalAlignment="Stretch">
                <Button Name="SettingsButton"
                        Tag="ToolIcon"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="{DynamicResource ButtonPadding}"
                        ToolTip.Tip="Settings"
                        VerticalAlignment="Center"
                        Click="SettingsButton_Click">
                    <shell:SktIcon IconKey="Icon.ToolbarSettings" IconSize="{DynamicResource IconSizeMenu}"/>
                </Button>

                <!-- Transparent spacer to separate settings from window controls -->
                <Border Width="10" Background="Transparent"/>

                <Button Name="Minimize"
                        Tag="WindowControl"
                        ToolTip.Tip="Minimize"
                        Click="Minimize_Click">
                    <shell:SktIcon IconKey="Icon.Minimize" IconSize="{DynamicResource IconSizeMenu}"/>
                </Button>


                <Button Name="MaximizeRestoreButton"
                        Tag="WindowControl"
                        ToolTip.Tip="{Binding WindowStateButtonTooltip}"
                        Click="Restore_Click">
                    <shell:SktIcon IconKey="{Binding WindowStateIconKey}" IconSize="{DynamicResource IconSizeMenu}"/>
                </Button>

                <Button Name="CloseButton"
                        Tag="WindowControl"
                        ToolTip.Tip="Close"
                        Click="Close_Click">
                    <shell:SktIcon IconKey="Icon.Close" IconSize="{DynamicResource IconSizeMenu}"/>
                </Button>
            </StackPanel>
        </Grid>
    </Border>

</UserControl>